!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{w2km:function(t,i,a){"use strict";a.r(i),a.d(i,"routes",function(){return ge}),a.d(i,"TablesModule",function(){return we});var c=a("ofXK"),o=a("tyNb"),r=a("fXoL"),s=a("XNiG");a("xgIS"),a("2Vo4"),a("1G5W"),a("mrSG");var l,u,d,m,f,p,b,h=((d=function(){function t(n){e(this,t),this.document=n,this.width=this.getWidth()}return n(t,[{key:"getWidth",value:function(){var e=this.document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",this.document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=this.document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),t-i}}]),t}()).\u0275fac=function(e){return new(e||d)(r.ic(c.d))},d.\u0275prov=r.Ub({token:d,factory:d.\u0275fac}),d),v=((u=function(){function t(){e(this,t)}return n(t,[{key:"getDimensions",value:function(e){return e.getBoundingClientRect()}}]),t}()).\u0275fac=function(e){return new(e||u)},u.\u0275prov=r.Ub({token:u,factory:u.\u0275fac}),u),y=((l=function(){function t(){e(this,t),this.columnInputChanges=new s.a}return n(t,[{key:"onInputChange",value:function(){this.columnInputChanges.next()}},{key:"columnInputChanges$",get:function(){return this.columnInputChanges.asObservable()}}]),t}()).\u0275fac=function(e){return new(e||l)},l.\u0275prov=r.Ub({token:l,factory:l.\u0275fac}),l),g={},w="undefined"!=typeof document?document.createElement("div").style:void 0,S=(m="undefined"!=typeof window?window.getComputedStyle(document.documentElement,""):void 0,f=void 0!==m?Array.prototype.slice.call(m).join("").match(/-(moz|webkit|ms)-/):null,p=null!==f?f[1]:void 0,(b=void 0!==p?"WebKit|Moz|MS|O".match(new RegExp("("+p+")","i"))[1]:void 0)?{dom:b,lowercase:p,css:"-".concat(p,"-"),js:p[0].toUpperCase()+p.substr(1)}:void 0);function M(e){var t=e.replace(/[^a-zA-Z0-9 ]/g," ").replace(/([a-z](?=[A-Z]))/g,"$1 ").replace(/([^a-zA-Z0-9 ])|^[0-9]+/g,"").trim().toLowerCase().replace(/([ 0-9]+)([a-zA-Z])/g,function(e,t,n){return t.trim()+n.toUpperCase()});return g[t]||(void 0!==S&&void 0!==w[S.css+e]?g[t]=S.css+e:void 0!==w[e]&&(g[t]=e)),g[t]}"undefined"!=typeof window&&M("transform"),"undefined"!=typeof window&&M("backfaceVisibility"),"undefined"!=typeof window&&M("transform"),"undefined"!=typeof window&&M("perspective");var C="undefined"!=typeof window?window.navigator.userAgent:"Chrome";/Safari\//.test(C)&&/Chrome\//.test(C);var k,D=((k=function(){function t(){e(this,t)}return n(t,null,[{key:"forRoot",value:function(e){return{ngModule:t,providers:[{provide:"configuration",useValue:e}]}}}]),t}()).\u0275mod=r.Wb({type:k}),k.\u0275inj=r.Vb({factory:function(e){return new(e||k)},providers:[h,v,y],imports:[[c.c]]}),k);"undefined"==typeof document||document.elementsFromPoint||(document.elementsFromPoint=function(e,t){for(var n,i,a,c=[],o=[];(n=document.elementFromPoint(e,t))&&-1===c.indexOf(n)&&null!=n;)c.push(n),o.push({value:n.style.getPropertyValue("pointer-events"),priority:n.style.getPropertyPriority("pointer-events")}),n.style.setProperty("pointer-events","none","important");for(i=o.length;a=o[--i];)c[i].style.setProperty("pointer-events",a.value?a.value:"",a.priority);return c});var A=a("PCNd"),x=a("+0xr"),V=a("/RaO"),O=a("or22"),N=a("dNgK"),X=a("C790"),I=a("XiUz"),B=a("Dh3D"),Z=a("bTqV");function q(e,t){1&e&&(r.ec(0,"mat-header-cell"),r.Xc(1,"Request Date "),r.dc())}function U(e,t){if(1&e&&(r.ec(0,"mat-cell"),r.Xc(1),r.rc(2,"date"),r.dc()),2&e){var n=t.$implicit;r.Mb(1),r.Zc("",r.tc(2,1,n.createdAt,"dd/MM/yyyy")," ")}}function P(e,t){1&e&&(r.ec(0,"mat-header-cell",17),r.Xc(1,"Updated Date "),r.dc())}function L(e,t){if(1&e&&(r.ec(0,"mat-cell"),r.Xc(1),r.rc(2,"date"),r.dc()),2&e){var n=t.$implicit;r.Mb(1),r.Zc("",r.tc(2,1,n.updatedAt,"dd/MM/yyyy")," ")}}function J(e,t){1&e&&(r.ec(0,"mat-header-cell",17),r.Xc(1," title "),r.dc())}function R(e,t){if(1&e&&(r.ec(0,"mat-cell"),r.Xc(1),r.dc()),2&e){var n=t.$implicit;r.Mb(1),r.Zc(" ",n.title," ")}}function $(e,t){1&e&&(r.ec(0,"mat-header-cell",17),r.Xc(1," description "),r.dc())}function F(e,t){if(1&e&&(r.ec(0,"mat-cell"),r.Xc(1),r.dc()),2&e){var n=t.$implicit;r.Mb(1),r.Zc(" ",n.descriptionMaintenance," ")}}function _(e,t){1&e&&(r.ec(0,"mat-header-cell",17),r.Xc(1," Type "),r.dc())}function E(e,t){if(1&e&&(r.ec(0,"mat-cell"),r.Xc(1),r.dc()),2&e){var n=t.$implicit;r.Mb(1),r.Zc(" ",n.type," ")}}function W(e,t){1&e&&(r.ec(0,"mat-header-cell",17),r.Xc(1," Status "),r.dc())}function j(e,t){if(1&e&&(r.ec(0,"mat-cell"),r.Xc(1),r.dc()),2&e){var n=t.$implicit;r.Mb(1),r.Zc(" ",n.statut," ")}}function z(e,t){1&e&&(r.ec(0,"mat-header-cell"),r.Xc(1," Action"),r.dc())}function G(e,t){if(1&e){var n=r.fc();r.ec(0,"button",21),r.mc("click",function(){r.Mc(n);var e=r.qc().$implicit;return r.qc().validerDemande(e)}),r.ec(1,"span",20),r.Xc(2," offline_pin "),r.dc(),r.dc()}}function H(e,t){if(1&e){var n=r.fc();r.ec(0,"mat-cell"),r.Vc(1,G,3,0,"button",18),r.ec(2,"button",19),r.mc("click",function(){r.Mc(n);var e=t.$implicit;return r.qc().deleteDemande(e)}),r.ec(3,"span",20),r.Xc(4," delete_sweep "),r.dc(),r.dc(),r.dc()}if(2&e){var i=t.$implicit;r.Mb(1),r.xc("ngIf","validated"!==i.statut)}}function Y(e,t){1&e&&r.Zb(0,"mat-header-row")}function T(e,t){1&e&&r.Zb(0,"mat-row")}var K,Q,ee,te,ne,ie=((K=function(){function t(n,i,a){e(this,t),this.appSettings=n,this.tablesService=i,this.snackBar=a,this.displayedColumns=["requestDate","updatedDate","title","description","type","status","action"]}return n(t,[{key:"ngAfterViewInit",value:function(){var e=this;this.tablesService.getAllMaintenances().subscribe(function(t){e.dataSource=t,e.settings=e.appSettings.settings,e.dataSource.sort(function(e,t){return t.createdAt-e.createdAt}),e.dataSource.reverse(),e.data=new x.k(e.dataSource)})}},{key:"deleteDemande",value:function(e){var t=this;this.tablesService.deleteMaintenance(e._id).subscribe(function(e){t.tablesService.getAllMaintenances().subscribe(function(e){t.dataSource=e,t.data=new x.k(t.dataSource)}),t.snackBar.open("demande maintenance supprimer ","close",{duration:2e3})})}},{key:"validerDemande",value:function(e){var t=this,n={statut:JSON.parse(JSON.stringify("validated"))};this.tablesService.updateMaintenance(e._id,n).subscribe(function(e){t.tablesService.getAllMaintenances().subscribe(function(e){t.dataSource=e,t.data=new x.k(t.dataSource)}),t.snackBar.open("demande maintenance valid\xe9e ","close",{duration:2e3})})}}]),t}()).\u0275fac=function(e){return new(e||K)(r.Yb(V.a),r.Yb(O.a),r.Yb(N.a))},K.\u0275cmp=r.Sb({type:K,selectors:[["app-sorting"]],decls:28,vars:9,consts:[[3,"icon","title","hideBreadcrumb","hasBgImage"],["fxLayout","column",1,"p-2"],[1,"p-2"],["matSort","",1,"mat-elevation-z8",3,"dataSource"],["table",""],["matColumnDef","requestDate"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","updatedDate"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","title"],["matColumnDef","description"],["matColumnDef","type"],["matColumnDef","status"],["matColumnDef","action"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["mat-mini-fab","","color","primary","class","m-1 ",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"m-1",3,"click"],[1,"material-icons"],["mat-mini-fab","","color","primary",1,"m-1",3,"click"]],template:function(e,t){1&e&&(r.Zb(0,"app-content-header",0),r.ec(1,"div",1),r.ec(2,"div",2),r.ec(3,"mat-table",3,4),r.cc(5,5),r.Vc(6,q,2,0,"mat-header-cell",6),r.Vc(7,U,3,4,"mat-cell",7),r.bc(),r.cc(8,8),r.Vc(9,P,2,0,"mat-header-cell",9),r.Vc(10,L,3,4,"mat-cell",7),r.bc(),r.cc(11,10),r.Vc(12,J,2,0,"mat-header-cell",9),r.Vc(13,R,2,1,"mat-cell",7),r.bc(),r.cc(14,11),r.Vc(15,$,2,0,"mat-header-cell",9),r.Vc(16,F,2,1,"mat-cell",7),r.bc(),r.cc(17,12),r.Vc(18,_,2,0,"mat-header-cell",9),r.Vc(19,E,2,1,"mat-cell",7),r.bc(),r.cc(20,13),r.Vc(21,W,2,0,"mat-header-cell",9),r.Vc(22,j,2,1,"mat-cell",7),r.bc(),r.cc(23,14),r.Vc(24,z,2,0,"mat-header-cell",6),r.Vc(25,H,5,1,"mat-cell",7),r.bc(),r.Vc(26,Y,1,0,"mat-header-row",15),r.Vc(27,T,1,0,"mat-row",16),r.dc(),r.dc(),r.dc()),2&e&&(r.Ob("pb-4"),r.xc("icon","sort")("title","Maintenances")("hideBreadcrumb",!1)("hasBgImage",!0),r.Mb(3),r.xc("dataSource",t.data),r.Mb(23),r.xc("matHeaderRowDef",t.displayedColumns),r.Mb(1),r.xc("matRowDefColumns",t.displayedColumns))},directives:[X.a,I.c,x.j,B.a,x.c,x.e,x.b,x.g,x.i,x.d,x.a,B.b,c.n,Z.b,x.f,x.h],pipes:[c.e],encapsulation:2}),K),ae=[{position:1,name:"Hydrogen",weight:1.0079,symbol:"H"},{position:2,name:"Helium",weight:4.0026,symbol:"He"},{position:3,name:"Lithium",weight:6.941,symbol:"Li"},{position:4,name:"Beryllium",weight:9.0122,symbol:"Be"},{position:5,name:"Boron",weight:10.811,symbol:"B"},{position:6,name:"Carbon",weight:12.0107,symbol:"C"},{position:7,name:"Nitrogen",weight:14.0067,symbol:"N"},{position:8,name:"Oxygen",weight:15.9994,symbol:"O"},{position:9,name:"Fluorine",weight:18.9984,symbol:"F"},{position:10,name:"Neon",weight:20.1797,symbol:"Ne"},{position:11,name:"Sodium",weight:22.9897,symbol:"Na"},{position:12,name:"Magnesium",weight:24.305,symbol:"Mg"},{position:13,name:"Aluminum",weight:26.9815,symbol:"Al"},{position:14,name:"Silicon",weight:28.0855,symbol:"Si"},{position:15,name:"Phosphorus",weight:30.9738,symbol:"P"},{position:16,name:"Sulfur",weight:32.065,symbol:"S"},{position:17,name:"Chlorine",weight:35.453,symbol:"Cl"},{position:18,name:"Argon",weight:39.948,symbol:"Ar"},{position:19,name:"Potassium",weight:39.0983,symbol:"K"},{position:20,name:"Calcium",weight:40.078,symbol:"Ca"}],ce=((Q=function(){function t(){e(this,t)}return n(t,[{key:"getData",value:function(){return ae}}]),t}()).\u0275fac=function(e){return new(e||Q)},Q.\u0275prov=r.Ub({token:Q,factory:Q.\u0275fac}),Q),oe=a("3Pt+"),re=a("EjJx"),se=a("5KN4"),le=a("EFyh"),ue=a("6Qg2"),de=a("Wp6s"),me=a("kmnG"),fe=a("qFsG"),pe=a("d3UM"),be=a("FKr1"),he=a("0IaG"),ve=((ee=function(){function t(n,i,a,c,o){e(this,t),this.maintenancesService=n,this.snackBar=i,this.loginService=a,this.messagesService=c,this.UserService=o,this.formMaintenance=new oe.g({title:new oe.e("",[oe.t.required]),descriptionMaintenance:new oe.e("",[oe.t.required]),type:new oe.e("",[oe.t.required])})}return n(t,[{key:"ngOnInit",value:function(){this.formMaintenance=new oe.g({title:new oe.e("",[oe.t.required]),descriptionMaintenance:new oe.e("",[oe.t.required]),type:new oe.e("",[oe.t.required]),status:new oe.e(""),userOwner:new oe.e("")})}},{key:"onSubmit",value:function(){var e=this,t=localStorage.getItem("token"),n=Object(re.a)(t);this.formMaintenance.patchValue({userOwner:JSON.parse(JSON.stringify(n))._id}),this.maintenancesService.addMaintenance(this.formMaintenance.value).subscribe(function(t){e.snackBar.open("Maintenance added successfully","close",{duration:2e3}),"informatique"===e.formMaintenance.value.type&&e.UserService.getAllUsers().subscribe(function(t){var i=t.find(function(e){return"Responsable-info"===e.work.roles[0].name});e.messages={reciever:i._id,text:"you have new maintenance",userOwner:JSON.parse(JSON.stringify(n))._id,maintenance:!0},e.messagesService.sendNotification(e.messages).subscribe()}),"autres"===e.formMaintenance.value.type&&e.UserService.getAllUsers().subscribe(function(t){var i=t.find(function(e){return"respon-maintenance"===e.work.roles[0].name});e.messages={reciever:i._id,text:"you have new maintenance",userOwner:JSON.parse(JSON.stringify(n))._id,maintenance:!0},e.messagesService.sendNotification(e.messages).subscribe()}),e.ngOnInit()})}}]),t}()).\u0275fac=function(e){return new(e||ee)(r.Yb(O.a),r.Yb(N.a),r.Yb(le.a),r.Yb(se.a),r.Yb(ue.a))},ee.\u0275cmp=r.Sb({type:ee,selectors:[["app-form-field"]],features:[r.Lb([se.a])],decls:25,vars:9,consts:[[3,"icon","title","hideBreadcrumb","hasBgImage"],["fxLayout","column",1,"p-2"],[1,"p-2"],[3,"formGroup"],["fxLayoutAlign","center"],["fxLayout","column","fxLayoutAlign","center"],["matInput","","placeholder","Titre","formControlName","title"],["matInput","","placeholder","description","formControlName","descriptionMaintenance"],["placeholder","Type de Maintenance","formControlName","type"],["value","informatique"],["value","autres"],["mat-dialog-actions","","fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","color","primary","type","submit",3,"mat-dialog-close","disabled","click"]],template:function(e,t){1&e&&(r.Zb(0,"app-content-header",0),r.ec(1,"div",1),r.ec(2,"div",2),r.ec(3,"form",3),r.ec(4,"mat-card"),r.ec(5,"mat-card-header",4),r.ec(6,"mat-card-subtitle"),r.ec(7,"h2"),r.Xc(8,"Demande de maintenance"),r.dc(),r.dc(),r.dc(),r.ec(9,"mat-card-content",5),r.ec(10,"mat-form-field"),r.Zb(11,"input",6),r.dc(),r.ec(12,"mat-form-field"),r.Zb(13,"textarea",7),r.dc(),r.ec(14,"mat-form-field"),r.ec(15,"mat-select",8),r.ec(16,"mat-option",9),r.Xc(17,"Informatique"),r.dc(),r.ec(18,"mat-option",10),r.Xc(19,"Autres"),r.dc(),r.dc(),r.dc(),r.Zb(20,"br"),r.Zb(21,"br"),r.dc(),r.ec(22,"div",11),r.ec(23,"button",12),r.mc("click",function(){return t.onSubmit()}),r.Xc(24,"Envoy\xe9 Demande"),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc()),2&e&&(r.Ob("pb-4"),r.xc("icon","view_stream")("title","Maintenance")("hideBreadcrumb",!1)("hasBgImage",!0),r.Mb(3),r.xc("formGroup",t.formMaintenance),r.Mb(20),r.xc("mat-dialog-close",t.formMaintenance.value)("disabled",!t.formMaintenance.valid))},directives:[X.a,I.c,oe.u,oe.o,oe.h,de.a,de.d,I.b,de.g,de.c,me.c,fe.b,oe.c,oe.n,oe.f,pe.a,be.m,he.c,Z.b,he.d],encapsulation:2}),ee),ye=a("tA9a"),ge=[{path:"",redirectTo:"sorting",pathMatch:"full"},{path:"sorting",component:ie,data:{breadcrumb:"Sorting table"}},{path:"liste-maintenance",canActivate:[(te=function(){function t(n,i){e(this,t),this.auth=n,this.router=i}return n(t,[{key:"canActivate",value:function(){return!!this.auth.isAllowedMaintenance()||(this.router.navigate([""]),!1)}}]),t}(),te.\u0275fac=function(e){return new(e||te)(r.ic(ye.a),r.ic(o.d))},te.\u0275prov=r.Ub({token:te,factory:te.\u0275fac,providedIn:"root"}),te)],component:ie,data:{breadcrumb:"Sorting table"}},{path:"Demande-Maintenance",component:ve,data:{breadcrumb:"Form Field"}}],we=((ne=function t(){e(this,t)}).\u0275mod=r.Wb({type:ne}),ne.\u0275inj=r.Vb({factory:function(e){return new(e||ne)},providers:[ce],imports:[[c.c,o.h.forChild(ge),D,A.a]]}),ne)}}])}();