(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{j6Lp:function(e,t,a){"use strict";a.r(t),a.d(t,"routes",function(){return ke}),a.d(t,"FormControlsModule",function(){return Ce});var c=a("ofXK"),s=a("tyNb"),i=a("3Pt+"),n=a("Kdsb"),r=a("PCNd"),o=a("/RaO"),d=a("EjJx"),l=a("Radc"),u=a("6Qg2"),m=a("fXoL"),f=a("dNgK"),h=a("C790"),b=a("XiUz"),p=a("Wp6s"),g=a("kmnG"),v=a("qFsG"),y=a("iadO"),w=a("bTqV");function S(e,t){1&e&&(m.ec(0,"mat-error"),m.Xc(1," Start date is required "),m.dc())}function k(e,t){1&e&&(m.ec(0,"mat-error"),m.Xc(1," please verify the dates "),m.dc())}function C(e,t){1&e&&(m.ec(0,"mat-error"),m.Xc(1," End date is required"),m.dc())}function D(e,t){1&e&&(m.ec(0,"mat-error"),m.Xc(1,"please verify the dates"),m.dc())}function O(e,t){1&e&&(m.ec(0,"mat-error"),m.Xc(1," holidays reason is required"),m.dc())}let M=(()=>{class e{constructor(e,t,a,c){this.appSettings=e,this.congeService=t,this.snackBar=a,this.userservice=c,this.form=new i.g({nbreJours:new i.e(""),dateDebut:new i.e("",[i.t.required]),dateFin:new i.e("",[i.t.required]),motif:new i.e("",[i.t.required]),status:new i.e(""),userOwner:new i.e("")}),this.valid=!0,this.validated=!1,this.startDate=new Date(1990,0,1),this.minDate=new Date(2010,0,1),this.maxDate=new Date(2020,0,1),this.myFilter=e=>{const t=e.getDay();return 0!==t&&6!==t},this.events=[],this.holidays=[{value:"Public holiday",viewValue:"Public holidays"},{value:"Vacation days",viewValue:"Vacation days"},{value:"Sick days",viewValue:"Sick days"},{value:"Maternity",viewValue:"Maternity"}],this.settings=this.appSettings.settings}ngOnInit(){this.token=localStorage.getItem("token"),this.decoded=Object(d.a)(this.token),this.userId=this.decoded._id,this.userservice.getUser(this.userId).subscribe(e=>{this.soldeConge=JSON.parse(JSON.stringify(e.work.soldeConge))}),this.form=new i.g({nbreJours:new i.e(""),dateDebut:new i.e("",[i.t.required]),dateFin:new i.e("",[i.t.required]),motif:new i.e("",[i.t.required]),status:new i.e(""),userOwner:new i.e("")})}addEvent(e,t){this.events.push(`${e}: ${t.value}`)}onFormSubmit(){let e=new Date,t=new Date(this.form.value.dateDebut),a=new Date(this.form.value.dateFin),c=new Date;var s=(a.getTime()-t.getTime())/864e5;let i=new Date(c.setDate(e.getDate()+2));e<t&&t<=a&&i<t&&0!=this.soldeConge&&s<=this.soldeConge?(this.validated=!1,this.form.patchValue({nbreJours:s+1,dateDebut:t,dateFin:a,userOwner:JSON.parse(JSON.stringify(this.decoded))._id,status:JSON.parse(JSON.stringify(this.decoded)).roles[0].name}),this.congeService.addconge(this.form.value).subscribe(e=>{this.snackBar.open("your request has been sent successfully","close",{duration:2e3}),this.ngOnInit()})):(this.validated=!0,this.snackBar.open("please be sure that the end and start date are correct ","close",{duration:2e3}))}}return e.\u0275fac=function(t){return new(t||e)(m.Yb(o.a),m.Yb(l.a),m.Yb(f.a),m.Yb(u.a))},e.\u0275cmp=m.Sb({type:e,selectors:[["app-datepicker"]],decls:60,vars:18,consts:[[3,"icon","title","hideBreadcrumb","hasBgImage"],[3,"formGroup"],["fxLayout","column","fxLayout.gt-sm","row wrap",1,"p-2"],["fxFlex","50",1,"p-2"],["fxLayoutAlign","center"],["matInput","","placeholder","Choose a date","formControlName","dateDebut",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],[4,"ngIf"],["matInput","","placeholder","Choose a date","formControlName","dateFin",3,"matDatepicker"],["picker2",""],[1,"mx-2"],["matInput","","placeholder","e.g : vacation days","formControlName","motif"],["fxLayoutAlign"," center center"],["mat-flat-button","","color","warn",1,"m-1",3,"disabled","click"]],template:function(e,t){if(1&e&&(m.Zb(0,"app-content-header",0),m.ec(1,"form",1),m.ec(2,"div",2),m.ec(3,"div",3),m.ec(4,"mat-card"),m.ec(5,"mat-card-header",4),m.ec(6,"mat-card-subtitle"),m.ec(7,"h2"),m.Xc(8," Start date "),m.dc(),m.dc(),m.dc(),m.ec(9,"mat-card-content",4),m.ec(10,"div"),m.ec(11,"mat-form-field"),m.Zb(12,"input",5),m.Zb(13,"mat-datepicker-toggle",6),m.Zb(14,"mat-datepicker",null,7),m.Vc(16,S,2,0,"mat-error",8),m.dc(),m.Vc(17,k,2,0,"mat-error",8),m.dc(),m.dc(),m.dc(),m.dc(),m.ec(18,"div",3),m.ec(19,"mat-card"),m.ec(20,"mat-card-header",4),m.ec(21,"mat-card-subtitle"),m.ec(22,"h2"),m.Xc(23,"End date"),m.dc(),m.dc(),m.dc(),m.ec(24,"mat-card-content",4),m.ec(25,"div"),m.ec(26,"mat-form-field"),m.Zb(27,"input",9),m.Zb(28,"mat-datepicker-toggle",6),m.Zb(29,"mat-datepicker",null,10),m.Vc(31,C,2,0,"mat-error",8),m.dc(),m.Vc(32,D,2,0,"mat-error",8),m.dc(),m.dc(),m.dc(),m.dc(),m.ec(33,"div",3),m.ec(34,"mat-card"),m.ec(35,"mat-card-header"),m.ec(36,"mat-card-subtitle"),m.ec(37,"h2"),m.Xc(38,"select your reason for absence"),m.dc(),m.dc(),m.dc(),m.ec(39,"mat-card-content"),m.ec(40,"mat-form-field",11),m.Zb(41,"input",12),m.Vc(42,O,2,0,"mat-error",8),m.dc(),m.dc(),m.dc(),m.dc(),m.ec(43,"div",3),m.ec(44,"mat-card"),m.ec(45,"mat-card-header",4),m.ec(46,"mat-card-subtitle"),m.Zb(47,"h2"),m.dc(),m.dc(),m.ec(48,"mat-card-content",13),m.ec(49,"div"),m.ec(50,"mat-card-subtitle"),m.ec(51,"h2"),m.Xc(52,"for your information :"),m.dc(),m.dc(),m.ec(53,"p"),m.Xc(54),m.dc(),m.ec(55,"p"),m.Xc(56,"to send vacation request : start date should be after 3 days from now "),m.dc(),m.dc(),m.dc(),m.dc(),m.dc(),m.dc(),m.dc(),m.ec(57,"div",4),m.ec(58,"button",14),m.mc("click",function(){return t.onFormSubmit()}),m.Xc(59,"send your request"),m.dc(),m.dc()),2&e){const e=m.Jc(15),a=m.Jc(30);m.Ob("pb-4"),m.xc("icon","today")("title","Holidays request")("hideBreadcrumb",!1)("hasBgImage",!0),m.Mb(1),m.xc("formGroup",t.form),m.Mb(11),m.xc("matDatepicker",e),m.Mb(1),m.xc("for",e),m.Mb(3),m.xc("ngIf",null==t.form.controls.dateDebut.errors?null:t.form.controls.dateDebut.errors.required),m.Mb(1),m.xc("ngIf",t.validated),m.Mb(10),m.xc("matDatepicker",a),m.Mb(1),m.xc("for",a),m.Mb(3),m.xc("ngIf",null==t.form.controls.dateFin.errors?null:t.form.controls.dateFin.errors.required),m.Mb(1),m.xc("ngIf",t.validated),m.Mb(10),m.xc("ngIf",null==t.form.controls.motif.errors?null:t.form.controls.motif.errors.required),m.Mb(12),m.Zc("your leave balance is : ",t.soldeConge," "),m.Mb(4),m.xc("disabled",!t.form.valid)}},directives:[h.a,i.u,i.o,i.h,b.c,b.a,p.a,p.d,b.b,p.g,p.c,g.c,v.b,i.c,y.b,i.n,i.f,y.d,g.i,y.a,c.n,w.b,g.b],styles:[".events-list[_ngcontent-%COMP%]{height:97px}"]}),e})();var V=a("+0xr"),N=a("0IaG"),X=a("EFyh"),x=a("5KN4");function q(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," User Name "),m.dc())}function I(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.ad(" ",e.userOwner.profile.name," ",e.userOwner.profile.surname," ")}}function J(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," Request Date "),m.dc())}function R(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.rc(2,"date"),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.Zc(" ",m.tc(2,1,e.createdAt,"dd/MM/yyyy")," ")}}function Z(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," Start day "),m.dc())}function B(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.rc(2,"date"),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.Zc(" ",m.tc(2,1,e.dateDebut,"dd/MM/yyyy")," ")}}function F(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," End date "),m.dc())}function A(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.rc(2,"date"),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.Zc(" ",m.tc(2,1,e.dateFin,"dd/MM/yyyy")," ")}}function _(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1,"days number"),m.dc())}function $(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.Zc(" ",e.nbreJours," ")}}function H(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," Vacation reason "),m.dc())}function P(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.Zc(" ",e.motif," ")}}function Y(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," checked by / status "),m.dc())}function L(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.Zc(" ",e.status," ")}}function j(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," Action"),m.dc())}function G(e,t){if(1&e){const e=m.fc();m.ec(0,"button",24),m.mc("click",function(){m.Mc(e);const t=m.qc().$implicit;return m.qc().confirmRequest(t)}),m.ec(1,"span",23),m.Xc(2," offline_pin "),m.dc(),m.dc()}}function T(e,t){if(1&e){const e=m.fc();m.ec(0,"button",22),m.mc("click",function(){m.Mc(e);const t=m.qc().$implicit;return m.qc().cancelRequest(t)}),m.ec(1,"span",23),m.Xc(2," cancel_presentation "),m.dc(),m.dc()}}function U(e,t){if(1&e){const e=m.fc();m.ec(0,"mat-cell"),m.Vc(1,G,3,0,"button",20),m.Vc(2,T,3,0,"button",21),m.ec(3,"button",22),m.mc("click",function(){m.Mc(e);const a=t.$implicit;return m.qc().openDialog(a)}),m.ec(4,"span",23),m.Xc(5," delete_sweep "),m.dc(),m.dc(),m.dc()}if(2&e){const e=t.$implicit;m.Mb(1),m.xc("ngIf","validated"!=e.status&&"annul\xe9e"!=e.status),m.Mb(1),m.xc("ngIf","validated"!=e.status&&"annul\xe9e"!=e.status)}}function E(e,t){1&e&&m.Zb(0,"mat-header-row")}function z(e,t){1&e&&m.Zb(0,"mat-row")}let K=(()=>{class e{constructor(e,t,a,c,s,n){this.appSettings=e,this.tablesService=t,this.snackBar=a,this.dialog=c,this.loginService=s,this.messagesService=n,this.displayedColumns=["user","requestDate","dateDebut","dateFin","daysNumber","motif","status","respond"],this.form=new i.g({_id:new i.e(""),username:new i.e(""),password:new i.e(""),profile:new i.g({name:new i.e(""),surname:new i.e(""),birthday:new i.e(""),gender:new i.e("")}),work:new i.g({company:new i.e(""),roles:new i.e([]),soldeConge:new i.e("")}),contacts:new i.g({email:new i.e(""),phone:new i.e(""),address:new i.e("")}),social:new i.g({facebook:new i.e(""),twitter:new i.e(""),google:new i.e("")}),settings:new i.g({registrationDate:new i.e(""),joinedDate:new i.e(""),bgColor:new i.e("")})})}ngOnInit(){this.token=localStorage.getItem("token"),this.decoded=JSON.parse(JSON.stringify(Object(d.a)(this.token))),this.compare=this.decoded.roles[0].name,this.settings=this.appSettings.settings,this.tablesService.getAllconges().subscribe(e=>{switch(this.dataSource=e,this.dataSource=this.dataSource.sort((e,t)=>t.createdAt-e.createdAt),this.dataSource.reverse(),this.compare){case"surveillant G\xe9n\xe9rale":this.userConges=this.dataSource.filter(e=>"infirmiers et aide"===e.status||"surveillant Maternit\xe9"===e.status||"surveillant Bloc"===e.status||"surveillant Anesth\xe9sie"===e.status||"surveillant chirurgie"===e.status||"anesthesistes"===e.status);break;case"responsable facturation":this.userConges=this.dataSource.filter(e=>"acceuil+cassiers+facturations"===e.status||"cassiers principale"===e.status);break;case"respon-maintenance":this.userConges=this.dataSource.filter(e=>"team-matenaince"===e.status);break;case"hyginiste":this.userConges=this.dataSource.filter(e=>"cuisine"===e.status);break;case"Respnsable Pharmacie":this.userConges=this.dataSource.filter(e=>"pharmaciens"===e.status||"cassiers principale"===e.status);break;case"gouvernantes":this.userConges=this.dataSource.filter(e=>"ouvriers"===e.status);break;case"respon-financier":this.userConges=this.dataSource.filter(e=>"comptable"===e.status);break;case"gouvernantes":case"gouvernantes":this.userConges=this.dataSource.filter(e=>"ouvriers"===e.status);break;case"Pdg":this.userConges=this.dataSource.filter(e=>"econome"===e.status||"respon-financier"===e.status||"gouvernantes"===e.status||"Respnsable Pharmacie"===e.status||"hyginiste"===e.status||"respon-maintenance"===e.status||"responsable facturation"===e.status||"responsable-RH"===e.status||"secritaire personnelle"===e.status||"secritaire g\xe9n\xe9rale"===e.status||"surveillant G\xe9n\xe9rale"===e.status||"Responsable-info"===e.status||"directeur-technique"===e.status);break;case"directeur-technique":this.userConges=this.dataSource.filter(e=>"surveillant G\xe9n\xe9rale1"===e.status);break;case"responsable-RH":this.userConges=this.dataSource.filter(e=>"directeur-technique1"===e.status||"gouvernantes1"===e.status||"Respnsable Pharmacie1"===e.status||"hyginiste1"===e.status||"respon-maintenance1"===e.status||"responsable facturation1"===e.status||"Pdg1"===e.status||"respon-financier1"===e.status||"responsable-RH1"===e.status||"validated"===e.status);break;default:this.userConges=this.dataSource}this.data=new V.k(this.userConges)})}applyFilter(e){this.data.filter=e.trim().toLowerCase()}confirmRequest(e){switch(e.status){case"infirmiers et aide":case"surveillant Maternit\xe9":case"surveillant Bloc":case"surveillant Anesth\xe9sie":case"surveillant chirurgie":case"anesthesistes":var t="surveillant G\xe9n\xe9rale1",a={status:JSON.parse(JSON.stringify(t))};break;case"acceuil+cassiers+facturations":t="responsable facturation1",a={status:JSON.parse(JSON.stringify(t))};break;case"team-matenaince":t="respon-maintenance1",a={status:JSON.parse(JSON.stringify(t))};break;case"cuisine":t="hyginiste1",a={status:JSON.parse(JSON.stringify(t))};break;case"pharmaciens":t="Respnsable Pharmacie1",a={status:JSON.parse(JSON.stringify(t))};break;case"ouvriers":t="gouvernantes1",a={status:JSON.parse(JSON.stringify(t))};break;case"comptable":t="respon-financier1",a={status:JSON.parse(JSON.stringify(t))};break;case"econome":case"respon-financier":case"gouvernantes":case"Respnsable Pharmacie":case"hyginiste":case"respon-maintenance":case"responsable facturation":case"responsable-RH":case"secritaire personnelle":case"secritaire g\xe9n\xe9rale":case"surveillant G\xe9n\xe9rale":case"Responsable-info":case"directeur-technique":t="Pdg1",a={status:JSON.parse(JSON.stringify(t))};break;case"directeur-technique1":case"gouvernantes1":case"Respnsable Pharmacie1":case"hyginiste1":case"respon-maintenance1":case"responsable facturation1":case"Pdg1":case"respon-financier1":case"admin":t="responsable-RH1",a={status:JSON.parse(JSON.stringify(t))};break;case"surveillant G\xe9n\xe9rale1":t="directeur-technique1",a={status:JSON.parse(JSON.stringify(t))};break;case"responsable-RH1":t="validated",a={status:JSON.parse(JSON.stringify(t))},this.token=localStorage.getItem("token"),this.decoded=JSON.parse(JSON.stringify(Object(d.a)(this.token))),this.userId=this.decoded._id,this.soldeConge=this.decoded.soldeConge,this.loginService.getUser(this.userId).subscribe(t=>{this.user=t,this.form.patchValue(this.user),this.form.patchValue({work:{soldeConge:this.soldeConge-e.nbreJours}}),this.loginService.updateUserConge(this.userId,this.form.value).subscribe(e=>{})}),this.messagesService.sendNotification({reciever:e.userOwner._id,text:"your vacation leaves has been approved",userOwner:this.userId,conge:!0}).subscribe()}this.tablesService.updateconge(e._id,a).subscribe(e=>{this.ngOnInit(),this.snackBar.open("holidays request approved","close",{duration:2e3})})}cancelRequest(e){var t={status:JSON.parse(JSON.stringify("annul\xe9e"))};this.tablesService.updateconge(e._id,t).subscribe(e=>{this.ngOnInit(),this.snackBar.open("holidays request canceled","close",{duration:2e3})})}openDialog(e){this.dialog.open(W,{data:{message:"Are you sure want to delete ?",buttonText:{ok:"Save",cancel:"No"}}}).afterClosed().subscribe(t=>{t&&this.tablesService.deleteconge(e._id).subscribe(e=>{this.ngOnInit(),this.snackBar.open("request deleted","close",{duration:2e3})})})}}return e.\u0275fac=function(t){return new(t||e)(m.Yb(o.a),m.Yb(l.a),m.Yb(f.a),m.Yb(N.b),m.Yb(X.a),m.Yb(x.a))},e.\u0275cmp=m.Sb({type:e,selectors:[["app-filtering"]],features:[m.Lb([x.a])],decls:34,vars:9,consts:[[3,"icon","title","hideBreadcrumb","hasBgImage"],["fxLayout","column",1,"p-2"],[1,"p-2"],["fxLayout","column",1,"mat-elevation-z8"],[1,"px-3","py-1"],["matInput","","placeholder","search...",3,"keyup"],[1,"mat-elevation-z8",3,"dataSource"],["table",""],["matColumnDef","user"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","requestDate"],["matColumnDef","dateDebut"],["matColumnDef","dateFin"],["matColumnDef","daysNumber"],["matColumnDef","motif"],["matColumnDef","status"],["matColumnDef","respond"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-mini-fab","","color","primary","class","m-1 ",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn","class","m-1 ",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",1,"m-1",3,"click"],[1,"material-icons"],["mat-mini-fab","","color","primary",1,"m-1",3,"click"]],template:function(e,t){1&e&&(m.Zb(0,"app-content-header",0),m.ec(1,"div",1),m.ec(2,"div",2),m.ec(3,"div",3),m.ec(4,"mat-form-field",4),m.ec(5,"input",5),m.mc("keyup",function(e){return t.applyFilter(e.target.value)}),m.dc(),m.dc(),m.dc(),m.ec(6,"mat-table",6,7),m.cc(8,8),m.Vc(9,q,2,0,"mat-header-cell",9),m.Vc(10,I,2,2,"mat-cell",10),m.bc(),m.cc(11,11),m.Vc(12,J,2,0,"mat-header-cell",9),m.Vc(13,R,3,4,"mat-cell",10),m.bc(),m.cc(14,12),m.Vc(15,Z,2,0,"mat-header-cell",9),m.Vc(16,B,3,4,"mat-cell",10),m.bc(),m.cc(17,13),m.Vc(18,F,2,0,"mat-header-cell",9),m.Vc(19,A,3,4,"mat-cell",10),m.bc(),m.cc(20,14),m.Vc(21,_,2,0,"mat-header-cell",9),m.Vc(22,$,2,1,"mat-cell",10),m.bc(),m.cc(23,15),m.Vc(24,H,2,0,"mat-header-cell",9),m.Vc(25,P,2,1,"mat-cell",10),m.bc(),m.cc(26,16),m.Vc(27,Y,2,0,"mat-header-cell",9),m.Vc(28,L,2,1,"mat-cell",10),m.bc(),m.cc(29,17),m.Vc(30,j,2,0,"mat-header-cell",9),m.Vc(31,U,6,2,"mat-cell",10),m.bc(),m.Vc(32,E,1,0,"mat-header-row",18),m.Vc(33,z,1,0,"mat-row",19),m.dc(),m.dc(),m.dc()),2&e&&(m.Ob("pb-4"),m.xc("icon","format_line_spacing")("title","Holidays list")("hideBreadcrumb",!1)("hasBgImage",!0),m.Mb(6),m.xc("dataSource",t.data),m.Mb(26),m.xc("matHeaderRowDef",t.displayedColumns),m.Mb(1),m.xc("matRowDefColumns",t.displayedColumns))},directives:[h.a,b.c,g.c,v.b,V.j,V.c,V.e,V.b,V.g,V.i,V.d,V.a,c.n,w.b,V.f,V.h],pipes:[c.e],encapsulation:2}),e})(),W=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.message="Are you sure?",this.confirmButtonText="Yes",this.cancelButtonText="Cancel"}onNoClick(){this.dialogRef.close()}onConfirmClick(){this.dialogRef.close(!0)}}return e.\u0275fac=function(t){return new(t||e)(m.Yb(N.g),m.Yb(N.a))},e.\u0275cmp=m.Sb({type:e,selectors:[["dialog-overview-example-dialog"]],decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"w-100"],["mat-dialog-actions","",1,"w-100"],["mat-button","","tabindex","1",3,"click"],["mat-button","","tabindex","-1",3,"click"]],template:function(e,t){1&e&&(m.ec(0,"h1",0),m.Xc(1,"Delete request"),m.dc(),m.ec(2,"div",1),m.ec(3,"p"),m.Xc(4,"decline request ?"),m.dc(),m.dc(),m.ec(5,"div",2),m.ec(6,"button",3),m.mc("click",function(){return t.onConfirmClick()}),m.Xc(7),m.dc(),m.ec(8,"button",4),m.mc("click",function(){return t.onNoClick()}),m.Xc(9),m.dc(),m.dc()),2&e&&(m.Mb(7),m.Yc(t.confirmButtonText),m.Mb(2),m.Yc(t.cancelButtonText))},encapsulation:2}),e})();function Q(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," User Name "),m.dc())}function ee(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.ad(" ",e.userOwner.profile.name," ",e.userOwner.profile.surname," ")}}function te(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," Request Date "),m.dc())}function ae(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.rc(2,"date"),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.Zc(" ",m.tc(2,1,e.createdAt,"dd/MM/yyyy")," ")}}function ce(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," Start day "),m.dc())}function se(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.rc(2,"date"),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.Zc(" ",m.tc(2,1,e.dateDebut,"dd/MM/yyyy")," ")}}function ie(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," End date "),m.dc())}function ne(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.rc(2,"date"),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.Zc(" ",m.tc(2,1,e.dateFin,"dd/MM/yyyy")," ")}}function re(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1,"Days number"),m.dc())}function oe(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.Zc(" ",e.nbreJours," ")}}function de(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," Vacation reason "),m.dc())}function le(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Xc(1),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.Zc(" ",e.motif," ")}}function ue(e,t){1&e&&(m.ec(0,"mat-header-cell"),m.Xc(1," Status "),m.dc())}function me(e,t){1&e&&(m.ec(0,"button",22),m.ec(1,"span",23),m.Xc(2," schedule "),m.dc(),m.dc())}function fe(e,t){1&e&&(m.ec(0,"button",24),m.ec(1,"span",23),m.Xc(2," done_all "),m.dc(),m.dc())}function he(e,t){1&e&&(m.ec(0,"button",25),m.ec(1,"span",23),m.Xc(2," cancel_presentation "),m.dc(),m.dc())}function be(e,t){if(1&e&&(m.ec(0,"mat-cell"),m.Vc(1,me,3,0,"button",19),m.Vc(2,fe,3,0,"button",20),m.Vc(3,he,3,0,"button",21),m.dc()),2&e){const e=t.$implicit;m.Mb(1),m.xc("ngIf","validated"!==e.status&&"annul\xe9e"!==e.status),m.Mb(1),m.xc("ngIf","validated"===e.status),m.Mb(1),m.xc("ngIf","annul\xe9e"===e.status)}}function pe(e,t){1&e&&m.Zb(0,"mat-header-row")}function ge(e,t){1&e&&m.Zb(0,"mat-row")}let ve=(()=>{class e{constructor(e,t){this.appSettings=e,this.tablesService=t,this.displayedColumns=["user","requestDate","dateDebut","dateFin","daysNumber","motif","status"],this.form=new i.g({nbreJours:new i.e(""),dateDebut:new i.e("",[i.t.required]),dateFin:new i.e("",[i.t.required]),motif:new i.e("",[i.t.required]),status:new i.e(""),userOwner:new i.e("")}),this.settings=this.appSettings.settings}ngOnInit(){this.userConge()}applyFilter(e){this.data.filter=e.trim().toLowerCase()}userConge(){this.token=localStorage.getItem("token"),this.decoded=JSON.parse(JSON.stringify(Object(d.a)(this.token))),this.userId=this.decoded._id,this.tablesService.getAllconges().subscribe(e=>{this.dataSource=e,this.dataSource=this.dataSource.sort((e,t)=>t.createdAt-e.createdAt),this.dataSource.reverse(),this.userConges=this.dataSource.filter(e=>e.userOwner._id===this.userId),this.data=new V.k(this.userConges)})}}return e.\u0275fac=function(t){return new(t||e)(m.Yb(o.a),m.Yb(l.a))},e.\u0275cmp=m.Sb({type:e,selectors:[["app-filtering"]],decls:31,vars:9,consts:[[3,"icon","title","hideBreadcrumb","hasBgImage"],["fxLayout","column",1,"p-2"],[1,"p-2"],["fxLayout","column",1,"mat-elevation-z8"],[1,"px-3","py-1"],["matInput","","placeholder","Type to filter all columns",3,"keyup"],[1,"mat-elevation-z8",3,"dataSource"],["table",""],["matColumnDef","user"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","requestDate"],["matColumnDef","dateDebut"],["matColumnDef","dateFin"],["matColumnDef","daysNumber"],["matColumnDef","motif"],["matColumnDef","status"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-mini-fab","","class","m-1 ","id","pending",4,"ngIf"],["mat-mini-fab","","class","m-1 ","id","validated",4,"ngIf"],["mat-mini-fab","","class","m-1 ","id","canceled",4,"ngIf"],["mat-mini-fab","","id","pending",1,"m-1"],[1,"material-icons"],["mat-mini-fab","","id","validated",1,"m-1"],["mat-mini-fab","","id","canceled",1,"m-1"]],template:function(e,t){1&e&&(m.Zb(0,"app-content-header",0),m.ec(1,"div",1),m.ec(2,"div",2),m.ec(3,"div",3),m.ec(4,"mat-form-field",4),m.ec(5,"input",5),m.mc("keyup",function(e){return t.applyFilter(e.target.value)}),m.dc(),m.dc(),m.dc(),m.ec(6,"mat-table",6,7),m.cc(8,8),m.Vc(9,Q,2,0,"mat-header-cell",9),m.Vc(10,ee,2,2,"mat-cell",10),m.bc(),m.cc(11,11),m.Vc(12,te,2,0,"mat-header-cell",9),m.Vc(13,ae,3,4,"mat-cell",10),m.bc(),m.cc(14,12),m.Vc(15,ce,2,0,"mat-header-cell",9),m.Vc(16,se,3,4,"mat-cell",10),m.bc(),m.cc(17,13),m.Vc(18,ie,2,0,"mat-header-cell",9),m.Vc(19,ne,3,4,"mat-cell",10),m.bc(),m.cc(20,14),m.Vc(21,re,2,0,"mat-header-cell",9),m.Vc(22,oe,2,1,"mat-cell",10),m.bc(),m.cc(23,15),m.Vc(24,de,2,0,"mat-header-cell",9),m.Vc(25,le,2,1,"mat-cell",10),m.bc(),m.cc(26,16),m.Vc(27,ue,2,0,"mat-header-cell",9),m.Vc(28,be,4,3,"mat-cell",10),m.bc(),m.Vc(29,pe,1,0,"mat-header-row",17),m.Vc(30,ge,1,0,"mat-row",18),m.dc(),m.dc(),m.dc()),2&e&&(m.Ob("pb-4"),m.xc("icon","format_line_spacing")("title","Holidays")("hideBreadcrumb",!1)("hasBgImage",!0),m.Mb(6),m.xc("dataSource",t.data),m.Mb(23),m.xc("matHeaderRowDef",t.displayedColumns),m.Mb(1),m.xc("matRowDefColumns",t.displayedColumns))},directives:[h.a,b.c,g.c,v.b,V.j,V.c,V.e,V.b,V.g,V.i,V.d,V.a,c.n,w.b,V.f,V.h],pipes:[c.e],styles:["#canceled[_ngcontent-%COMP%]{background:#f05858}#validated[_ngcontent-%COMP%]{background:#30eb59}#pending[_ngcontent-%COMP%]{background:#d8a64a}"]}),e})();var ye=a("tA9a");let we=(()=>{class e{constructor(e,t){this.auth=e,this.router=t}canActivate(){return!!this.auth.isAllowedrequestlist()||(this.router.navigate([""]),!1)}}return e.\u0275fac=function(t){return new(t||e)(m.ic(ye.a),m.ic(s.d))},e.\u0275prov=m.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Se=(()=>{class e{constructor(e,t){this.auth=e,this.router=t}canActivate(){return!!this.auth.isAllowedHolidays()||(this.router.navigate([""]),!1)}}return e.\u0275fac=function(t){return new(t||e)(m.ic(ye.a),m.ic(s.d))},e.\u0275prov=m.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ke=[{path:"",redirectTo:"datepicker",pathMatch:"full"},{path:"datepicker",canActivate:[Se],component:M,data:{breadcrumb:"Datepicker"}},{path:"Holidays-list",canActivate:[Se],component:ve,data:{breadcrumb:"Holidays list"}},{path:"holidays-requests-list",canActivate:[we],component:K,data:{breadcrumb:"holidays requests list"}}];let Ce=(()=>{class e{}return e.\u0275mod=m.Wb({type:e}),e.\u0275inj=m.Vb({factory:function(t){return new(t||e)},imports:[[c.c,s.h.forChild(ke),i.j,i.r,n.c,r.a,V.l]]}),e})()}}]);